@using System.Linq
@model VincKiralamaProjesi.ViewModels.QuoteSuggestionsViewModel

@{
    ViewData["Title"] = "Size Önerilen Vinçler";
}

<h2>Size Önerilen Vinçler</h2>

<h5 class="mt-3">Talep Özeti</h5>
<div class="border rounded p-3 mb-4">
    <p><strong>İş Türü:</strong> @Model.Request.JobType</p>
    <p><strong>Konum:</strong> @Model.Request.City @(" / ") @Model.Request.District</p>
    <p>
        <strong>Çalışma yüksekliği:</strong> 
        @(Model.Request.HeightMeters.HasValue ? Model.Request.HeightMeters + " m" : "Belirtilmedi")
    </p>
    <p>
        <strong>Yük ağırlığı:</strong> 
        @(Model.Request.LoadWeightKg.HasValue ? Model.Request.LoadWeightKg + " kg" : "Belirtilmedi")
    </p>
    <p><strong>Tarih:</strong> @Model.Request.JobStartDate.ToShortDateString()</p>
    <p><strong>İş süresi:</strong> @Model.Request.Duration</p>
    <p><strong>Müşteri:</strong> @Model.Request.CustomerName (@Model.Request.Phone)</p>
</div>

@if (!Model.SuggestedCranes.Any())
{
    <div class="alert alert-warning">
        Talebinize göre uygun vinç bulunamadı. Lütfen farklı bir konum veya daha esnek kriterler ile tekrar deneyin.
    </div>
}
else
{
    <p class="text-muted">
        Aşağıda talebinize göre uygun olabilecek vinçler listelenmiştir. 
        En uygun fiyattan başlayarak sıralanmıştır.
    </p>

    <table class="table table-striped mt-3">
        <thead>
            <tr>
                <th>Vinç Adı</th>
                <th>Kategori</th>
                <th>Firma</th>
                <th>Konum</th>
                <th>Kapsite (Ton)</th>
                <th>Günlük Fiyat (₺)</th>
            </tr>
        </thead>
        <tbody>
        @foreach (var crane in Model.SuggestedCranes)
        {
            <tr>
                <td>@crane.Name</td>
                <td>@crane.Category?.Name</td>
                <td>@crane.Firm?.Name</td>
                <td>@crane.City @(" / ") @crane.District</td>
                <td>@crane.CapacityTon</td>
                <td>@crane.DailyPrice</td>
            </tr>
        }
        </tbody>
    </table>
}

<a asp-controller="Quotes" asp-action="Create" class="btn btn-outline-secondary mt-3">
    Yeni bir talep oluştur
</a>
<a asp-controller="Home" asp-action="Index" class="btn btn-primary mt-3 ms-2">
    Ana sayfaya dön
</a>
